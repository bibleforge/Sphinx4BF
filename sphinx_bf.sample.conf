#
# BibleForge Sphinx configuration (sample)
# 
# @date 02-23-10
# @version alpha (Î±)
# @link http://BibleForge.com
# @license GNU Affero General Public License 3.0 (AGPL-3.0)
# @author @author  BibleForge <info@bibleforge.com>

# Change the sql_host, sql_user, sql_pass, sql_db, sql_port, and/or sql_sock for each index to match your system's configuration.
# Then rename this file and move it to a secure place.

source verse_text_english_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query      = SELECT id, words FROM `bible_english_verses`
    sql_query_info = SELECT words FROM `bible_english_verses` WHERE id = $id
}

index verse_text_english
{
    source            = verse_text_src
    path              = data_verse_text
    docinfo           = extern
    charset_type      = sbcs
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
}


source verse_text_en_em_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query      = SELECT id, words FROM `bible_en_em_verses`
    sql_query_info = SELECT words FROM `bible_en_em_verses` WHERE id = $id
}

index verse_text_en_em
{
    source            = verse_text_en_em_src
    path              = data_verse_text_en_em
    docinfo           = extern
    charset_type      = sbcs
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
}


source verse_text_english_distinct_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query = SELECT id, words, book FROM `bible_english_verses`
    
    sql_attr_uint  = book
    sql_query_info = SELECT words FROM `bible_english_verses` WHERE id = $id
}

index verse_text_english_distinct
{
    source            = verse_text_distinct_src
    path              = data_verse_text_distinct
    docinfo           = extern
    charset_type      = sbcs
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
}


source morphological_english_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query = SELECT `bible_english`.`id`, `morphology`.`id`, verseID, word, book, part_of_speech, declinability, case_5, number, gender, degree, tense, voice, mood, person, middle, transitivity, miscellaneous, noun_type, numerical, form, dialect, type, implied, divine, red FROM bible_english, morphology WHERE word != "" AND `bible_english`.`orig_id` = `morphology`.`id`
    
    sql_attr_uint = verseID
    sql_attr_uint = part_of_speech
    sql_attr_uint = book
    sql_attr_uint = declinability
    sql_attr_uint = case_5
    sql_attr_uint = number
    sql_attr_uint = gender
    sql_attr_uint = degree
    sql_attr_uint = tense
    sql_attr_uint = voice
    sql_attr_uint = mood
    sql_attr_uint = person
    sql_attr_uint = middle
    sql_attr_uint = transitivity
    sql_attr_uint = miscellaneous
    sql_attr_uint = noun_type
    sql_attr_uint = numerical
    sql_attr_uint = form
    sql_attr_uint = dialect
    sql_attr_uint = type
    sql_attr_uint = implied
    sql_attr_uint = divine
    sql_attr_uint = red
    
    sql_query_info = SELECT words, `bible_english`.`id` FROM bible_english_verses, bible_english, morphology WHERE `bible_english`.`id` = $id AND `bible_english`.`orig_id` = `morphology`.`id` AND bible_english_verses.id = `bible_english`.verseID
}

index morphological_english
{
    source            = morphological_src
    path              = data_morphological
    docinfo           = extern
    charset_type      = sbcs
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
}


# This is not used yet.

#source suggestions_english_src
#{
#    type      = mysql
#    sql_host  = localhost   # The MySQL server address
#    sql_user  = root        # The MySQL username
#    sql_pass  =             # The MySQL password
#    sql_db    = bf          # The MySQL database
#    sql_port  = 3306        # The MySQL port
#    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
#    
#    sql_query = SELECT id, text, hits FROM `suggestions_english`
#    
#    sql_attr_uint  = hits
#    sql_query_info = SELECT text, hits FROM `suggestions_english` WHERE id = $id
#}


#index suggestions_english
#{
#    source            = suggestions_english_src
#    path              = data_suggestions_english
#    docinfo           = extern
#    charset_type      = sbcs
#    morphology        = stem_en
#    min_word_len      = 1
#    enable_star       = 1
#    min_infix_len     = 1
#    index_exact_words = 1
#}


indexer
{
    mem_limit = 128M
}


searchd
{
    listen          = 9312
    log             = searchd.log
    query_log       = query.log
    read_timeout    = 5
    max_children    = 30
    pid_file        = searchd.pid
    max_matches     = 1000
    seamless_rotate = 0
    preopen_indexes = 0
    unlink_old      = 1
}
