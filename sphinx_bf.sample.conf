#
# BibleForge Sphinx configuration (sample)
#
# @date    02-23-10
# @version alpha (Î±)
# @link    http://BibleForge.com
# @license GNU Affero General Public License 3.0 (AGPL-3.0)
# @author  BibleForge <info@bibleforge.com>

# Change the sql_host, sql_user, sql_pass, sql_db, sql_port, and/or sql_sock for each index to match your system's configuration.
# Then rename this file and move it to a secure place.

source verse_text_en_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query      = SELECT id, words FROM `bible_en_verses`
    sql_query_info = SELECT words FROM `bible_en_verses` WHERE id = $id
}

index verse_text_en
{
    source            = verse_text_en_src
    path              = /var/sphinx_data/data_verse_text_en
    docinfo           = none
    charset_type      = sbcs #NOTE: sbcs is "single-byte encoding". utf-8 can also be used (without quotes).
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
    # Ignore symbols that can cause problems:
    #   U+2014 (em dash)
    ignore_chars      = U+2014
}


source verse_text_en_em_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query      = SELECT id, words FROM `bible_en_em_verses`
    sql_query_info = SELECT words FROM `bible_en_em_verses` WHERE id = $id
}

index verse_text_en_em
{
    source            = verse_text_en_em_src
    path              = /var/sphinx_data/data_verse_text_en_em
    docinfo           = none
    charset_type      = sbcs
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
    # Ignore symbols that can cause problems:
    #   U+2014 (em dash)
    ignore_chars      = U+2014
}


source verse_text_en_distinct_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query = SELECT id, words, book FROM `bible_en_verses`
    
    sql_attr_uint  = book
    sql_query_info = SELECT words FROM `bible_en_verses` WHERE id = $id
}

index verse_text_en_distinct
{
    source            = verse_text_en_distinct_src
    path              = /var/sphinx_data/data_verse_text_distinct_en
    docinfo           = extern
    charset_type      = sbcs
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
    # Ignore symbols that can cause problems:
    #   U+2014 (em dash)
    ignore_chars      = U+2014


source morphological_en_src
{
    type      = mysql
    sql_host  = localhost   # The MySQL server address
    sql_user  = root        # The MySQL username
    sql_pass  =             # The MySQL password
    sql_db    = bf          # The MySQL database
    sql_port  = 3306        # The MySQL port
    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
    
    sql_query = SELECT `bible_en`.`id`, `morphology`.`id`, verseID, word, book, part_of_speech, declinability, case_5, number, gender, degree, tense, voice, mood, person, middle, transitivity, miscellaneous, noun_type, numerical, form, dialect, type, implied, divine, red FROM bible_en, morphology WHERE word != "" AND `bible_en`.`orig_id` = `morphology`.`id`
    
    sql_attr_uint = verseID
    sql_attr_uint = part_of_speech
    sql_attr_uint = book
    sql_attr_uint = declinability
    sql_attr_uint = case_5
    sql_attr_uint = number
    sql_attr_uint = gender
    sql_attr_uint = degree
    sql_attr_uint = tense
    sql_attr_uint = voice
    sql_attr_uint = mood
    sql_attr_uint = person
    sql_attr_uint = middle
    sql_attr_uint = transitivity
    sql_attr_uint = miscellaneous
    sql_attr_uint = noun_type
    sql_attr_uint = numerical
    sql_attr_uint = form
    sql_attr_uint = dialect
    sql_attr_uint = type
    sql_attr_uint = implied
    sql_attr_uint = divine
    sql_attr_uint = red
    
    sql_query_info = SELECT words, `bible_en`.`id` FROM bible_en_verses, bible_en, morphology WHERE `bible_en`.`id` = $id AND `bible_en`.`orig_id` = `morphology`.`id` AND bible_en_verses.id = `bible_en`.verseID
}

index morphological_en
{
    source            = morphological_en_src
    path              = /var/sphinx_data/data_morphological_en
    docinfo           = extern
    charset_type      = sbcs
    morphology        = stem_en
    min_word_len      = 1
    enable_star       = 1
    min_infix_len     = 1
    index_exact_words = 1
    # Ignore symbols that can cause problems:
    #   U+2014 (em dash)
    ignore_chars      = U+2014
}


# This is not used yet.

#source suggestions_en_src
#{
#    type      = mysql
#    sql_host  = localhost   # The MySQL server address
#    sql_user  = root        # The MySQL username
#    sql_pass  =             # The MySQL password
#    sql_db    = bf          # The MySQL database
#    sql_port  = 3306        # The MySQL port
#    #sql_sock = mysqld.sock # The MySQL socket (if not using a port)
#    
#    sql_query = SELECT id, text, hits FROM `suggestions_en`
#    
#    sql_attr_uint  = hits
#    sql_query_info = SELECT text, hits FROM `suggestions_en` WHERE id = $id
#}


#index suggestions_en
#{
#    source            = suggestions_en_src
#    path              = /var/sphinx_data/data_suggestions_en
#    docinfo           = extern
#    charset_type      = sbcs
#    morphology        = stem_en
#    min_word_len      = 1
#    enable_star       = 1
#    min_infix_len     = 1
#    index_exact_words = 1
#}


indexer
{
    mem_limit = 128M
}


searchd
{
    listen          = 9312
    log             = /var/sphinx_data/searchd.log
    query_log       = /var/sphinx_data/query.log
    read_timeout    = 5
    max_children    = 30
    pid_file        = /var/sphinx_data/searchd.pid
    max_matches     = 1000
    seamless_rotate = 0
    preopen_indexes = 0
    unlink_old      = 1
    compat_sphinxql_magics = 0 # Turn off old SphinxQL compatibility mode.
}
